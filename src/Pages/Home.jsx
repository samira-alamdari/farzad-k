// import {fkSVG} from "../assets/image/fk.js";
import { useState, useEffect } from "react"
import { fetchHomeApi } from "../api/api";
import { getProjects } from '../slices/projectSlice';
import { useSelector, useDispatch } from "react-redux";
import { Link } from "react-router-dom";
import { AwardItem } from "../Components/awardItem";
export default function Home() {
    const [data, setData] = useState(null)
    const [loading, setLoading] = useState(true)
    const [error, setError] = useState(null)


    useEffect(() => {
        const getAboutData = async () => {
            try {
                const aboutData = await fetchHomeApi();
                const aboutDataFields = aboutData.fields
                console.log(aboutDataFields)
                setData(aboutDataFields)
            } catch (e) {
                setError(e)
                console.log(e)
            } finally {
                setLoading(false)
            }
        }
        getAboutData()
    }, [])

    const dispatch = useDispatch();
    const { projects, status, projecterror } = useSelector((state) => state.projects);

    
    useEffect(() => {
        if (status === 'idle') {
            dispatch(getProjects());
        }
    }, [status, dispatch]);

    if (status === 'loading') {
        return <div>Loading projects...</div>;
    }

    if (status === 'failed') {
        return <div>Error: {projecterror}</div>;
    }
    const featuredProjects = projects.slice(0, 4);

    if (loading) return <div>Loading in about page</div>
    if (error) return <div>Error in about page</div>
    return (
        <>
            <section className="pt-[40px] md:pt-[80px] pb-0">
                <div className="container">
                    <svg class="w-full" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2808.96 528.06" fill="none"><g class="transition-all duration-500 "><path d="M2768.15,458.37c0,13.81.83,23.86,2.51,30.14,2.09,6.28,5.86,10.67,11.3,13.19,5.44,2.09,14.44,3.14,27,3.14v13.19h-113.02v-13.19c12.56,0,21.56-1.05,27-3.14,5.44-2.51,9-6.91,10.67-13.19,2.09-6.28,3.14-16.33,3.14-30.14v-210.35c0-14.23-1.05-24.49-3.14-30.77-1.67-6.28-5.44-10.47-11.3-12.56-5.86-2.51-15.28-3.77-28.26-3.77v-13.19h66.56l7.54,7.53v263.09ZM2713.52,58.39h62.16v55.88h-62.16v-55.88Z" fill="#1A1A1A"></path><path d="M2625.09,306.42c0-28.88-5.03-54-15.07-75.35-9.63-21.77-24.28-32.65-43.96-32.65s-34.11,10.05-45.83,30.14c-11.3,20.09-18.63,46.05-21.98,77.86h126.84ZM2462.46,357.9c0-33.49,4.19-63.84,12.56-91.05,8.37-27.63,20.3-49.39,35.79-65.3,15.49-15.91,33.91-23.86,55.25-23.86,28.89,0,51.49,13.81,67.82,41.44,16.74,27.63,25.11,63.63,25.11,108h-162.62c-.42,4.6-.63,11.3-.63,20.09,0,43.12,6.91,79.11,20.72,108,14.23,28.46,33.7,42.7,58.39,42.7,17.17,0,31.82-10.46,43.96-31.4,12.56-21.35,22.81-56.93,30.76-106.74l13.19,2.51c-7.12,57.35-18.42,99.42-33.91,126.21-15.48,26.37-36.62,39.56-63.41,39.56-32.24,0-57.56-15.7-75.98-47.09-18-31.4-27-72.42-27-123.07Z" fill="#1A1A1A"></path><path d="M2397.72,528.06c-13.81,0-24.49-5.65-32.02-16.95-7.53-11.72-11.3-28.67-11.3-50.86v-26.37c-8.79,30.98-20.72,54.42-35.79,70.33-15.07,15.91-32.65,23.86-52.74,23.86s-35.79-6.91-47.09-20.72c-11.3-14.23-16.95-31.6-16.95-52.12,0-22.6,6.49-42.28,19.47-59.02,13.4-17.16,29.3-31.39,47.72-42.7,18.84-11.72,43.12-24.91,72.84-39.56l12.56-6.28v-35.79c0-26.37-4.6-45.42-13.81-57.14-8.79-11.72-21.98-17.58-39.56-17.58-14.23,0-25.95,3.35-35.16,10.05-8.79,6.7-13.19,15.7-13.19,27,0,5.86,1.67,12.14,5.02,18.84,2.51,6.7,3.77,11.72,3.77,15.07,0,6.28-1.88,11.51-5.65,15.7-3.77,3.77-8.79,5.65-15.07,5.65-7.53,0-13.6-3.14-18.21-9.42-4.19-6.28-6.28-14.65-6.28-25.12,0-22.18,8.58-40.6,25.74-55.26,17.58-15.07,39.14-22.6,64.67-22.6s43.53,7.74,57.77,23.23c14.65,15.07,21.98,38.51,21.98,70.32v193.39c0,16.32,1.67,27.63,5.02,33.91,3.35,5.86,7.95,8.79,13.81,8.79,15.07,0,22.81-18.21,23.23-54.63h13.19c-.84,50.65-15.49,75.98-43.95,75.98ZM2235.1,447.69c0,14.65,3.35,26.79,10.05,36.42,7.12,9.21,16.95,13.81,29.51,13.81,15.49,0,30.14-7.74,43.95-23.23,14.23-15.49,26.16-39.56,35.79-72.21v-75.98c-26.79,13.81-47.93,25.54-63.42,35.16-15.07,9.63-28.26,21.77-39.56,36.42-10.88,14.23-16.33,30.77-16.33,49.6Z" fill="#1A1A1A"></path><path d="M2033.54,504.83c13.4,0,23.02-1.05,28.88-3.14,6.28-2.51,10.47-6.91,12.56-13.19,2.09-6.28,3.14-16.33,3.14-30.14v-249.9h-40.19v-15.07l40.19-4.4v-62.79c0-43.12,8.37-74.93,25.12-95.44C2120.4,10.26,2142.38,0,2169.17,0,2181.31,0,2192.61,2.09,2203.07,6.28c10.47,4.19,18.84,9.63,25.12,16.33,6.28,6.7,9.42,13.6,9.42,20.72,0,5.86-1.88,10.88-5.65,15.07-3.35,3.77-8.16,5.65-14.44,5.65-5.44,0-9.84-1.67-13.19-5.02-3.35-3.35-7.95-9.42-13.81-18.21-5.02-7.53-9.63-12.56-13.81-15.07-4.19-2.93-9.42-4.4-15.7-4.4-33.91,0-50.86,34.12-50.86,102.35v64.05h67.18v20.72h-67.18v249.9c0,13.81,1.26,23.86,3.77,30.14,2.93,6.28,8.37,10.67,16.33,13.19,8.37,2.09,21.77,3.14,40.18,3.14v13.19h-136.88v-13.19Z" fill="#1A1A1A"></path><path d="M1981.98,528.06c-13.81,0-24.49-5.65-32.02-16.95-7.53-11.72-11.3-28.67-11.3-50.86v-26.37c-8.79,30.98-20.72,54.42-35.79,70.33-15.07,15.91-32.65,23.86-52.74,23.86s-35.79-6.91-47.09-20.72c-11.3-14.23-16.95-31.6-16.95-52.12,0-22.6,6.49-42.28,19.46-59.02,13.39-17.16,29.3-31.39,47.72-42.7,18.84-11.72,43.12-24.91,72.84-39.56l12.56-6.28v-35.79c0-26.37-4.6-45.42-13.81-57.14-8.79-11.72-21.98-17.58-39.56-17.58-14.23,0-25.95,3.35-35.16,10.05-8.79,6.7-13.18,15.7-13.18,27,0,5.86,1.67,12.14,5.02,18.84,2.51,6.7,3.77,11.72,3.77,15.07,0,6.28-1.88,11.51-5.65,15.7-3.77,3.77-8.79,5.65-15.07,5.65-7.53,0-13.6-3.14-18.21-9.42-4.19-6.28-6.28-14.65-6.28-25.12,0-22.18,8.58-40.6,25.74-55.26,17.58-15.07,39.14-22.6,64.67-22.6s43.53,7.74,57.77,23.23c14.65,15.07,21.98,38.51,21.98,70.32v193.39c0,16.32,1.67,27.63,5.02,33.91,3.35,5.86,7.95,8.79,13.81,8.79,15.07,0,22.81-18.21,23.23-54.63h13.19c-.84,50.65-15.49,75.98-43.95,75.98ZM1819.36,447.69c0,14.65,3.35,26.79,10.05,36.42,7.12,9.21,16.95,13.81,29.51,13.81,15.49,0,30.14-7.74,43.95-23.23,14.23-15.49,26.16-39.56,35.79-72.21v-75.98c-26.79,13.81-47.93,25.54-63.42,35.16-15.07,9.63-28.26,21.77-39.56,36.42-10.88,14.23-16.33,30.77-16.33,49.6Z" fill="#1A1A1A"></path><path d="M1713.47,466.53c9.21,15.91,17.79,26.37,25.74,31.4,8.37,4.6,19.46,6.91,33.28,6.91v13.19h-114.28v-13.19c12.56,0,21.14-.42,25.74-1.26,4.6-1.26,6.91-3.77,6.91-7.54,0-2.09-1.05-5.23-3.14-9.42-2.09-4.61-4.19-8.58-6.28-11.93-2.09-3.77-3.77-6.49-5.02-8.16l-80.37-139.39,70.32-91.05c7.12-8.79,10.67-15.91,10.67-21.35,0-9.21-11.09-13.81-33.28-13.81v-13.19h116.16v13.19c-14.65,0-26.58,2.09-35.79,6.28s-19.47,13.4-30.77,27.63l-65.93,84.14,86.02,147.56ZM1505.01,15.7h69.7l6.91,6.91v435.76c0,13.81.84,23.86,2.51,30.14,1.67,6.28,5.23,10.67,10.67,13.18,5.44,2.09,14.23,3.14,26.37,3.14v13.19h-112.39v-13.19c12.56,0,21.56-1.05,27-3.14,5.44-2.51,9-6.91,10.67-13.18,2.09-6.28,3.14-16.33,3.14-30.14V75.35c0-13.81-1.05-23.86-3.14-30.14-2.09-6.28-6.28-10.47-12.56-12.56-5.86-2.51-15.49-3.77-28.88-3.77v-13.19Z" fill="#1A1A1A"></path></g><g class="transition-all duration-500 "><path d="M1290.71,470.92c-16.74,38.09-42.7,57.14-77.86,57.14-28.88,0-51.28-15.7-67.18-47.09-15.49-31.4-23.24-71.16-23.24-119.3,0-33.49,3.98-64.26,11.93-92.3,7.96-28.05,19.68-50.23,35.17-66.56,15.9-16.74,34.74-25.12,56.51-25.12,30.14,0,52.32,11.51,66.55,34.53h.63V75.35c0-13.81-1.04-23.86-3.14-30.14-2.09-6.28-6.28-10.47-12.56-12.56-6.27-2.51-16.53-3.77-30.76-3.77v-13.19h72.21l6.28,6.91v434.51c0,15.07.41,25.12,1.25,30.14,1.26,5.02,4.4,7.54,9.42,7.54,4.6,0,13.39-2.93,26.37-8.79l5.02,12.56-48.34,21.98-17.59,7.53-8.16-7.53v-49.6h-2.51ZM1156.97,349.11c0,44.37,5.44,80.37,16.32,108,11.31,27.63,27.84,41.44,49.61,41.44,15.49,0,28.46-5.02,38.93-15.07,10.88-10.05,21.35-23.86,31.39-41.44v-126.21c0-34.74-5.65-62.58-16.95-83.51-11.3-20.93-27-31.4-47.09-31.4-24.7,0-42.91,14.44-54.63,43.33-11.72,28.46-17.58,63.42-17.58,104.86Z" fill="#1A1A1A"></path><path d="M1057.69,528.06c-13.81,0-24.49-5.65-32.02-16.95-7.54-11.72-11.3-28.67-11.3-50.86v-26.37c-8.79,30.98-20.72,54.42-35.79,70.33-15.07,15.91-32.65,23.86-52.74,23.86s-35.79-6.91-47.09-20.72c-11.3-14.23-16.95-31.6-16.95-52.12,0-22.6,6.49-42.28,19.47-59.02,13.39-17.16,29.3-31.39,47.72-42.7,18.84-11.72,43.12-24.91,72.84-39.56l12.56-6.28v-35.79c0-26.37-4.61-45.42-13.82-57.14-8.79-11.72-21.97-17.58-39.55-17.58-14.23,0-25.95,3.35-35.16,10.05-8.79,6.7-13.19,15.7-13.19,27,0,5.86,1.67,12.14,5.02,18.84,2.51,6.7,3.77,11.72,3.77,15.07,0,6.28-1.88,11.51-5.65,15.7-3.77,3.77-8.79,5.65-15.07,5.65-7.53,0-13.6-3.14-18.21-9.42-4.19-6.28-6.28-14.65-6.28-25.12,0-22.18,8.58-40.6,25.74-55.26,17.58-15.07,39.14-22.6,64.67-22.6s43.53,7.74,57.76,23.23c14.65,15.07,21.98,38.51,21.98,70.32v193.39c0,16.32,1.67,27.63,5.02,33.91,3.35,5.86,7.96,8.79,13.82,8.79,15.07,0,22.81-18.21,23.23-54.63h13.18c-.83,50.65-15.48,75.98-43.95,75.98ZM895.07,447.69c0,14.65,3.35,26.79,10.05,36.42,7.12,9.21,16.95,13.81,29.51,13.81,15.49,0,30.14-7.74,43.95-23.23,14.23-15.49,26.16-39.56,35.79-72.21v-75.98c-26.79,13.81-47.93,25.54-63.42,35.16-15.07,9.63-28.26,21.77-39.56,36.42-10.88,14.23-16.33,30.77-16.33,49.6Z" fill="#1A1A1A"></path><path d="M749.29,497.3c15.07,0,25.95-1.67,32.65-5.02,7.12-3.77,11.93-11.09,14.44-21.98,2.51-11.3,3.77-29.51,3.77-54.63h14.44v102.35h-187.74l1.88-13.19,152.58-296.37h-79.74c-15.49,0-26.79,1.67-33.91,5.02-6.7,2.93-11.3,9-13.81,18.21-2.51,9.21-3.77,24.49-3.77,45.84h-14.44v-89.79h184.6v13.19l-153.21,296.37h82.26Z" fill="#1A1A1A"></path><path d="M424.54,504.83c12.14,0,20.93-1.05,26.37-3.14,5.44-2.51,9-6.91,10.67-13.19,2.09-6.28,3.14-16.33,3.14-30.14v-210.35c0-14.23-1.05-24.49-3.14-30.77-2.09-6.28-6.28-10.47-12.56-12.56-5.86-2.51-15.49-3.77-28.88-3.77v-13.19h69.07l6.91,7.53v44.58h1.88c8.79-18.84,19.67-33.91,32.65-45.21,12.98-11.72,26.79-17.58,41.44-17.58,8.79,0,15.7,2.3,20.72,6.91,5.02,4.19,7.53,9.84,7.53,16.95,0,8.37-2.3,15.07-6.91,20.09-4.19,4.6-9,6.91-14.44,6.91-3.77,0-6.91-.63-9.42-1.88-2.09-1.67-5.02-4.4-8.79-8.16-3.35-3.35-6.07-5.65-8.16-6.91-2.09-1.26-4.81-1.88-8.16-1.88-7.12,0-14.86,5.23-23.23,15.7-8.37,10.05-16.74,25.54-25.12,46.46v186.49c0,14.23,1.26,24.49,3.77,30.77,2.93,6.28,8.58,10.67,16.95,13.19,8.37,2.09,21.98,3.14,40.81,3.14v13.19h-133.12v-13.19Z" fill="#1A1A1A"></path><path d="M364.18,528.06c-13.81,0-24.49-5.65-32.02-16.95-7.54-11.72-11.3-28.67-11.3-50.86v-26.37c-8.79,30.98-20.72,54.42-35.79,70.33-15.07,15.91-32.65,23.86-52.74,23.86s-35.79-6.91-47.09-20.72c-11.3-14.23-16.95-31.6-16.95-52.12,0-22.6,6.49-42.28,19.47-59.02,13.39-17.16,29.3-31.39,47.72-42.7,18.84-11.72,43.12-24.91,72.84-39.56l12.56-6.28v-35.79c0-26.37-4.6-45.42-13.81-57.14-8.79-11.72-21.98-17.58-39.56-17.58-14.23,0-25.95,3.35-35.16,10.05-8.79,6.7-13.19,15.7-13.19,27,0,5.86,1.67,12.14,5.02,18.84,2.51,6.7,3.77,11.72,3.77,15.07,0,6.28-1.88,11.51-5.65,15.7-3.77,3.77-8.79,5.65-15.07,5.65-7.54,0-13.6-3.14-18.21-9.42-4.19-6.28-6.28-14.65-6.28-25.12,0-22.18,8.58-40.6,25.74-55.26,17.58-15.07,39.14-22.6,64.67-22.6s43.53,7.74,57.77,23.23c14.65,15.07,21.98,38.51,21.98,70.32v193.39c0,16.32,1.67,27.63,5.02,33.91,3.35,5.86,7.95,8.79,13.81,8.79,15.07,0,22.81-18.21,23.23-54.63h13.18c-.84,50.65-15.49,75.98-43.95,75.98ZM201.56,447.69c0,14.65,3.35,26.79,10.05,36.42,7.12,9.21,16.95,13.81,29.51,13.81,15.49,0,30.14-7.74,43.95-23.23,14.23-15.49,26.16-39.56,35.79-72.21v-75.98c-26.79,13.81-47.93,25.54-63.42,35.16-15.07,9.63-28.26,21.77-39.56,36.42-10.88,14.23-16.32,30.77-16.32,49.6Z" fill="#1A1A1A"></path><path d="M0,504.83c13.4,0,23.02-1.05,28.88-3.14,6.28-2.51,10.47-6.91,12.56-13.19,2.09-6.28,3.14-16.33,3.14-30.14v-249.9H4.4v-15.07l40.19-4.4v-62.79c0-43.12,8.37-74.93,25.12-95.44C86.86,10.26,108.84,0,135.63,0c12.14,0,23.44,2.09,33.91,6.28,10.46,4.19,18.84,9.63,25.12,16.33,6.28,6.7,9.42,13.6,9.42,20.72,0,5.86-1.88,10.88-5.65,15.07-3.35,3.77-8.16,5.65-14.44,5.65-5.44,0-9.84-1.67-13.19-5.02-3.35-3.35-7.95-9.42-13.81-18.21-5.02-7.53-9.63-12.56-13.81-15.07-4.19-2.93-9.42-4.4-15.7-4.4-33.91,0-50.86,34.12-50.86,102.35v64.05h67.19v20.72h-67.19v249.9c0,13.81,1.26,23.86,3.77,30.14,2.93,6.28,8.37,10.67,16.33,13.19,8.37,2.09,21.77,3.14,40.19,3.14v13.19H0v-13.19Z" fill="#1A1A1A"></path></g></svg>
                    <div className="grid md:grid-cols-2 gap-4 mt-[40px] md:mt-[80px]">
                        <div className="h-full flex flex-wrap">
                            <p className="text__32 overflow-hidden">
                                <span className="ml-8 transition-all duration-700 inline-block  translate-x-0" dangerouslySetInnerHTML={{ __html: data.title }}></span>
                            </p>
                            <div className="w-full self-end inline-block">
                                <p className="text__18 md:inline-block hidden overflow-hidden transition-all duration-700 max-w-[100vw]">
                                    <span className="w-max inline-block">SCROLL TO EXPLORE</span>
                                </p>
                            </div>
                        </div>
                        <div className="md:mt-0 mt-[100px]">
                            <div className="overflow-hidden w-[200px] ss:w-[250px] md:w-[350px] h-[190px] ss:h-[220px] md:h-[295px]">
                                <div className="transition-all duration-700 ">
                                    <div className="w-[200px] ss:w-[250px] md:w-[350px] h-[190px] ss:h-[220px] md:h-[295px] overflow-hidden relative bg-Mbase_black">
                                        <img src={data.gallery[0]} className=" z-[1] w-full " alt="" />
                                    </div>
                                </div>
                            </div>
                            <p className="text__32 mt-[20px] md:mt-[40px]">
                                {/* <div className="overflow-hidden"> */}
                                {/* <div> */}
                                <span className="inline-block">
                                    {data.description}
                                </span>
                                {/* </div> */}
                                {/* </div> */}
                            </p>
                        </div>
                    </div>
                </div>
            </section>
            <section className="py-[48px]">
                <div className="container">
                    <div className="flex items-center justify-between w-[706px] mx-auto relative left-1/2 -translate-x-1/2 md:w-full">
                        {data.logos.map((item, index) => {
                            return (
                                <img key={index} src={item} className="transition-all duration-300 opacity-30 hover:opacity-100  xl:w-auto w-[120px]" alt="" />
                            )
                        })}
                    </div>
                </div>
            </section>
            <section>
                <div className="container">
                    <h5 className="text__24 opacity-40 mb-[48px] md:mb-[68px] lg:mb-[140px]">HOW IT WORKS</h5>
                </div>
                <div>

                    {data.hworks.map((item, index) => {
                        return (
                            <div key={index} className="border-t border-Mneutral_200 bg-white sticky top-0">
                                <div className="container">
                                    <div className="grid grid-cols-5 md:grid-cols-6 py-[80px]">
                                        <div className="col-span-1 md:col-span-2">
                                            <h5 className="opacity-20 text__40">{index.toString().length < 2 ? "0" + (index + 1) : (index + 1)}</h5>
                                        </div>
                                        <div className="col-span-4 md:col-span-4 itemCardWrap">
                                            <h4 className="text__40 mb-3">{item.title}</h4>
                                            <div dangerouslySetInnerHTML={{ __html: item.text }}>
                                            </div>
                                            <a className="px-[24px] py-[10px] rounded-full border border-Mneutral_900 inline-block mt-4" href="/about">
                                                <div className="flex items-center gap-2">
                                                    <p className="text__18">{item.link.title}</p>
                                                    <img src="https://farzad-k.com/images/carbon_arrow-up-right.svg" alt="Arrow Up Right Icon" />
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )
                    })}

                </div>
            </section >
            <section>
                <div className="container">
                    <h5 className="text__24 opacity-40 mb-[36px]">MY WORK</h5>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {
                            featuredProjects.map((project, index) => {
                                return (
                                    <Link className="w-full inline-block" to={project.link} key={index}>
                                        <div className="w-full h-[340px] md:h-[400px] lg:h-[550px] xl:h-[638px] relative overflow-hidden mb-3">
                                            <img src={project.image} className="object-cover absolute w-full h-full left-0 top-0 transition-all duration-500" alt={project.title} />
                                        </div>
                                        <div className="relative overflow-hidden inline-block w-full">
                                            <h5 className="text__24">
                                                <span className="opacity-20">{index.toString().length < 2 ? "0" + (index + 1) : (index + 1)}</span> {project.title}</h5>
                                            <div className="absolute right-0 top-1/2" >
                                                <img src="https://farzad-k.com/images/ArrowUpRight.svg" alt="Arrow Up Icon" /></div>
                                        </div>
                                    </Link>
                                )
                            })
                        }
                    </div>
                </div>
            </section>
            <section>
                <div className="container">
                    <h5 className="text__24 opacity-40 mb-[36px]">AWARDS</h5>
                    {data.aw.map((awItem, index) => {
                        return (
                           <AwardItem key={index} awItem={awItem} eachAwardList={awItem.award.items} awCount={awItem.award.count}/>
                        )
                    })}
                </div>
            </section>
        </>
    )
}